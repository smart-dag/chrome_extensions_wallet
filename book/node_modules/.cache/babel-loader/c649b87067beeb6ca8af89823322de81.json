{"remainingRequest":"/home/scott/vue/dapps/book/node_modules/babel-loader/lib/index.js!/home/scott/vue/dapps/book/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/scott/vue/dapps/book/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/scott/vue/dapps/book/src/views/ShopCar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/scott/vue/dapps/book/src/views/ShopCar.vue","mtime":1559634324343},{"path":"/home/scott/vue/dapps/book/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scott/vue/dapps/book/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/scott/vue/dapps/book/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scott/vue/dapps/book/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//载入对话框组件\nimport { Dialog } from \"vant\";\nexport default {\n  name: \"shopcar\",\n  components: {},\n  created: function created() {\n    //页面被创建后，更新总价。\n    this.upamount();\n  },\n  methods: {\n    //更新总价\n    upamount: function upamount() {\n      var amount = 0;\n      this.$store.state.shopcarlist.forEach(function (element) {\n        if (element.checked) {\n          amount += element.price * element.num;\n        }\n      }); // this.text = `总金额 ${amount.toFixed(2)}`;\n\n      this.price = amount.toFixed(2) * 100;\n\n      if (this.price > 0) {\n        this.pay_btn_disabled = false;\n        this.pay_btn_text = \"立刻支付\";\n      } else {\n        this.pay_btn_disabled = true;\n        this.pay_btn_text = \"请选商品\";\n      }\n    },\n    //支付按钮被点击\n    pay: function pay() {\n      var _this = this;\n\n      Dialog.alert({\n        title: \"付款成功\",\n        message: \"\"\n      }).then(function () {\n        //循环购物车，把已经购买的给删掉。留下没有购买的（未打勾的）\n        var list = [];\n\n        _this.$store.state.shopcarlist.forEach(function (element) {\n          if (!element.checked) {\n            list.push(element);\n          }\n        });\n\n        _this.$store.state.shopcarlist = list;\n      });\n    },\n    //回到首页，路由跳转\n    gohome: function gohome() {\n      this.$router.push({\n        path: \"/\",\n        name: \"home\"\n      });\n    },\n    //减\n    sub: function sub(index) {\n      this.$store.state.shopcarlist[index].num -= 1;\n\n      if (this.$store.state.shopcarlist[index].num < 1) {\n        this.del(index);\n      }\n\n      this.upamount();\n    },\n    //加\n    add: function add(index) {\n      this.$store.state.shopcarlist[index].num += 1;\n      this.upamount();\n    },\n    //删\n    del: function del(index) {\n      this.$store.state.shopcarlist.splice(index, 1);\n      this.upamount();\n    }\n  },\n  watch: {\n    //对全选按钮进行监控\n    checked: function checked(newvalue, oldvalue) {\n      //循环每个商品，更新选择状态\n      this.$store.state.shopcarlist.forEach(function (element) {\n        if (newvalue) {\n          element.checked = true;\n        } else {\n          element.checked = false;\n        }\n      });\n      this.upamount();\n    }\n  },\n  data: function data() {\n    return {\n      pay_btn_text: \"\",\n      //支付按钮的文本\n      pay_btn_disabled: false,\n      //支付按钮能否现实\n      checked: false,\n      //全选按钮\n      price: 0,\n      //总价\n      active: 1 //当前的底部菜单序列号（颜色变换）\n\n    };\n  }\n};",{"version":3,"sources":["ShopCar.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"shopcar\">\n    <van-nav-bar :fixed=\"true\" title=\"我的购物车\" left-text=\"返回\" left-arrow @click-left=\"gohome\"/>\n    <van-card\n      :num=\"item.num\"\n      :price=\"item.price\"\n      :title=\"item.title\"\n      :thumb=\"item.img\"\n      :key=\"$index\"\n      v-for=\"(item, $index) in $store.state.shopcarlist\"\n    >\n      <div slot=\"footer\">\n        <van-checkbox class=\"selectshop\" @change=\"upamount\" v-model=\"item.checked\"></van-checkbox>\n        <van-button class=\"cp\" size=\"mini\" @click=\"sub($index)\">-</van-button>\n        <van-button class=\"cp\" size=\"mini\" @click=\"add($index)\">+</van-button>\n        <van-button size=\"mini\" @click=\"del($index)\" type=\"danger\">删除</van-button>\n      </div>\n    </van-card>\n\n    <van-submit-bar\n      v-if=\"this.$store.state.shopcarlist.length>0\"\n      :price=\"price\"\n      :disabled=\"pay_btn_disabled\"\n      :button-text=\"pay_btn_text\"\n      @submit=\"pay\"\n    >\n      <van-checkbox v-model=\"checked\" class=\"selectall\">全选</van-checkbox>\n    </van-submit-bar>\n  </div>\n</template>\n<style scoped>\n.shopcar {\n  padding-top: 35px;\n  margin-bottom: 50px;\n}\n.van-card__header {\n  margin-left: 40px;\n}\n.selectshop {\n  margin-top: -60px;\n  position: absolute;\n  border: solid 1px #ccc;\n  border-radius: 100%;\n}\n.cp {\n  width: 40px;\n  min-width: 40px;\n}\n.selectall {\n  margin-left: 15px;\n}\n</style>\n\n<script>\n//载入对话框组件\nimport { Dialog } from \"vant\";\nexport default {\n  name: \"shopcar\",\n  components: {},\n  created() {\n    //页面被创建后，更新总价。\n    this.upamount();\n  },\n  methods: {\n    //更新总价\n    upamount() {\n      var amount = 0;\n      this.$store.state.shopcarlist.forEach(element => {\n        if (element.checked) {\n          amount += element.price * element.num;\n        }\n      });\n      // this.text = `总金额 ${amount.toFixed(2)}`;\n      this.price = amount.toFixed(2) * 100;\n      if (this.price > 0) {\n        this.pay_btn_disabled = false;\n        this.pay_btn_text = \"立刻支付\";\n      } else {\n        this.pay_btn_disabled = true;\n        this.pay_btn_text = \"请选商品\";\n      }\n    },\n    //支付按钮被点击\n    pay() {\n      Dialog.alert({\n        title: \"付款成功\",\n        message: \"\"\n      }).then(() => {\n        //循环购物车，把已经购买的给删掉。留下没有购买的（未打勾的）\n        var list = [];\n        this.$store.state.shopcarlist.forEach(element => {\n          if (!element.checked) {\n            list.push(element);\n          }\n        });\n        this.$store.state.shopcarlist = list;\n      });\n    },\n    //回到首页，路由跳转\n    gohome() {\n      this.$router.push({\n        path: \"/\",\n        name: \"home\"\n      });\n    },\n    //减\n    sub(index) {\n      this.$store.state.shopcarlist[index].num -= 1;\n      if (this.$store.state.shopcarlist[index].num < 1) {\n        this.del(index);\n      }\n      this.upamount();\n    },\n    //加\n    add(index) {\n      this.$store.state.shopcarlist[index].num += 1;\n      this.upamount();\n    },\n    //删\n    del(index) {\n      this.$store.state.shopcarlist.splice(index, 1);\n      this.upamount();\n    }\n  },\n  watch: {\n    //对全选按钮进行监控\n    checked(newvalue, oldvalue) {\n      //循环每个商品，更新选择状态\n      this.$store.state.shopcarlist.forEach(element => {\n        if (newvalue) {\n          element.checked = true;\n        } else {\n          element.checked = false;\n        }\n      });\n      this.upamount();\n    }\n  },\n  data() {\n    return {\n      pay_btn_text: \"\", //支付按钮的文本\n      pay_btn_disabled: false, //支付按钮能否现实\n      checked: false, //全选按钮\n      price: 0, //总价\n      active: 1 //当前的底部菜单序列号（颜色变换）\n    };\n  }\n};\n</script>\n"],"sourceRoot":"src/views"}]}