{"version":3,"sources":["webpack:///./src/views/Send.vue?83f5","webpack:///./src/views/Send.vue?26a7","webpack:///src/views/Send.vue","webpack:///./src/views/Send.vue?af18","webpack:///./src/views/Send.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Send_vue_vue_type_style_index_0_id_0bf73152_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Send_vue_vue_type_style_index_0_id_0bf73152_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","color","background","left-icon","_v","_s","balance","_e","label","disabled","model","value","callback","$$v","address","expression","placeholder","to","type","amount","text","button-text","checked","on","submit","pay","staticRenderFns","stringRandom","Wallet","default","Sendvue_type_script_lang_js_","name","components","methods","_this","console","log","wallet","send","parseInt","then","json","$router","push","path","params","hash","catch","err","es","alert","title","message","watch","newvalue","oldvalue","notenoughbalance","data","created","_this2","$route","peer_id","peerId","mnemonic","localStorage","getItem","generateMnemonic","toString","setItem","configHub","loginWithMnemonic","getAddress","getBalance","newbalance","views_Sendvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-6573d5fe.da3be477.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Send.vue?vue&type=style&index=0&id=0bf73152&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Send.vue?vue&type=style&index=0&id=0bf73152&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"send\"},[(_vm.notenoughbalance)?_c('van-notice-bar',{attrs:{\"color\":\"#1989fa\",\"background\":\"#ecf9ff\",\"left-icon\":\"info-o\"}},[_vm._v(\"余额不足，无法支付!，当前余额 \"+_vm._s(_vm.balance)+\" SDG\")]):_vm._e(),_c('van-cell-group',[_c('van-field',{attrs:{\"label\":\"付款地址\",\"disabled\":\"\"},model:{value:(_vm.address),callback:function ($$v) {_vm.address=$$v},expression:\"address\"}}),_c('van-field',{attrs:{\"label\":\"收款地址\",\"placeholder\":\"输入收款地址\"},model:{value:(_vm.to),callback:function ($$v) {_vm.to=$$v},expression:\"to\"}}),_c('van-field',{attrs:{\"label\":\"付款金额\",\"type\":\"number\",\"placeholder\":\"输入付款金额\"},model:{value:(_vm.amount),callback:function ($$v) {_vm.amount=$$v},expression:\"amount\"}}),_c('van-field',{attrs:{\"label\":\"备注信息\",\"placeholder\":\"输入备注信息\"},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}})],1),_c('van-submit-bar',{attrs:{\"button-text\":\"付款\",\"disabled\":!_vm.checked},on:{\"submit\":_vm.pay}},[_c('van-checkbox',{model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"勾选代表后果自己承担！\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"send\">\n    <van-notice-bar\n      color=\"#1989fa\"\n      background=\"#ecf9ff\"\n      left-icon=\"info-o\"\n      v-if=\"notenoughbalance\"\n    >余额不足，无法支付!，当前余额 {{balance}} SDG</van-notice-bar>\n    <van-cell-group>\n      <van-field label=\"付款地址\" v-model=\"address\" disabled/>\n      <van-field label=\"收款地址\" v-model=\"to\" placeholder=\"输入收款地址\"/>\n      <van-field label=\"付款金额\" type=\"number\" v-model=\"amount\" placeholder=\"输入付款金额\"/>\n      <van-field label=\"备注信息\" v-model=\"text\" placeholder=\"输入备注信息\"/>\n    </van-cell-group>\n    <van-submit-bar button-text=\"付款\" :disabled=\"!checked\" @submit=\"pay\">\n      <van-checkbox v-model=\"checked\">勾选代表后果自己承担！</van-checkbox>\n    </van-submit-bar>\n  </div>\n</template>\n<style scoped>\n.van-checkbox {\n  width: 100%;\n  padding-left: 10px;\n}\n</style>\n\n<script>\nconst stringRandom = require(\"string-random\");\nconst { default: Wallet } = require(\"sdagwallet.js\");\nimport { Dialog } from \"vant\";\nexport default {\n  name: \"send\",\n  components: {},\n  methods: {\n    pay() {\n      console.log(\"paying...\");\n      this.wallet\n        .send({ amount: parseInt(this.amount), to: this.to, text: this.text })\n        .then(json => {\n          console.log(json);\n          this.$router.push({\n            path: \"/success\",\n            name: \"success\",\n            params: { hash: json.hash }\n          });\n          // Dialog.alert({\n          //   title: \"标题\",\n          //   message: \"付款成功\"\n          // }).then(() => {\n          //   var bg = chrome.extension.getBackgroundPage();\n          //   console.log(bg);\n          //   bg.pay_success(); //pay_success()是background中的一个方法\n          //   this.$router.push({ path: \"/\" });\n          // });\n          //成功\n        })\n        .catch(err => {\n          //失败\n          console.log(err);\n          Dialog.alert({\n            title: \"错误\",\n            message: err\n          }).then(() => {});\n        });\n    }\n  },\n  watch: {\n    amount(newvalue, oldvalue) {\n      if (newvalue >= this.balance) {\n        console.log(newvalue);\n        this.notenoughbalance = true;\n      } else {\n        this.notenoughbalance = false;\n      }\n    },\n    balance(newvalue, oldvalue) {\n      if (newvalue > this.amount) {\n        this.notenoughbalance = false;\n      } else {\n        this.notenoughbalance = true;\n      }\n    }\n  },\n  data() {\n    return {\n      notenoughbalance: false,\n      checked: false,\n      address: \"\",\n      balance: \"\",\n      to: \"\",\n      amount: \"\",\n      text: \"\",\n      wallet: null\n    };\n  },\n  created() {\n    var _self = this;\n    this.to = this.$route.params.address;\n    this.amount = this.$route.params.amount;\n    this.text = this.$route.params.text;\n    let peer_id = stringRandom(32);\n    let wallet = new Wallet({ peerId: peer_id });\n    console.log(peer_id);\n    //从本地存储里获得助记词\n    let mnemonic = localStorage.getItem(\"mnemonic\");\n    //如果没有助记词,则生成助记词\n    if (!mnemonic) {\n      mnemonic = wallet.generateMnemonic().toString();\n      //保存在本地存储里\n      localStorage.setItem(\"mnemonic\", mnemonic);\n    }\n    //配置hub\n    wallet.configHub(\"wss://explorer.sdag.io:20003\");\n    //登录钱包\n    wallet.loginWithMnemonic(mnemonic).then(() => {\n      //算出钱包地址\n      let address = wallet.getAddress().toString();\n      this.address = address;\n      //获得余额\n      wallet.getBalance().then(balance => {\n        let newbalance = balance / 1000000;\n        _self.balance = newbalance;\n        _self.wallet = wallet;\n      });\n    });\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Send.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Send.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Send.vue?vue&type=template&id=0bf73152&scoped=true&\"\nimport script from \"./Send.vue?vue&type=script&lang=js&\"\nexport * from \"./Send.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Send.vue?vue&type=style&index=0&id=0bf73152&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bf73152\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}